:php
  function poxy_get_tax_header() {
  global $wp_query;
  $term_id = $wp_query->queried_object->term_id;
  $tax_meta = get_option( "taxonomy_term_$term_id" );


  $title = $wp_query->queried_object->name;
  $description = $wp_query->queried_object->description;
  $sub_title = $wp_query->queried_object->name;
  $button_url = false;

  $image = poxy_tax_image($term_id);
  $image = 'background-image: url('. $image. ')';
  $copywrite_name = $tax_meta['copywrite_name'];
  $copywrite_url = $tax_meta['copywrite_url'];

  $featured_image_position = 'cc';
  if ($tax_meta['featured_image_position']) {
    $featured_image_position = $tax_meta['featured_image_position'];
  }

  $bgs = $tax_meta['featured_image_bgs'];

  //- $featured_image_position = 'cc';
  //- if (isset($tax_meta['featured_image_position']) {
  //-   $featured_image_position = $tax_meta['featured_image_position'];
  //- }


  //- $featured_image_position = 'cc';
  //- if (  isset( $tax_meta['featured_image_position'] )
  //-   $featured_image_position = $tax_meta['featured_image_position'];


section.bg-black.white.clear.ofh
  - if ($copywrite_name) :
      figcaption.copywrite.zeta.daxy.p4.z6
        - if ($copywrite_url) :
          a(href!="<?php echo $copywrite_url; ?>")
            - echo $copywrite_name;
        - else :
          - echo $copywrite_name;
        - endif;
  - endif;
  .sw
    .cw.rela_12.b_12.c_58.d_58.e_p11
      .paxy.fill.shadow-l.z2.hd.he
      .rel.mb0.qoxya18a_12.qoxyb14b_12.qoxyc14c_58.poxyd11d_12.poxye11e_12
        figure(class!="rel image qaxya34a_p100qaxyb34b_p100qaxyc11c_p100_oxyd54d_p100_oxye54e_p100 bgs-<?php echo $bgs; ?> bgp-<?php echo $bgp; ?>" style!='<?php echo $image; ?>')
          .paxy.fill.shadow-r.z2.hd.he
      .rel.poxa18a_12.mb0.poxb14b_12.poxc14c_58.poxd14d_58.poxe11e_34
        .wrap
          .rel.paxya12a_12.paxyb12b_12.paxyc12c_58.poxd12d_58.poxe11e_12
            .rel._oxap11a_p11.z6._oxbp11b_p11._oxcp11c_p11.poxdp11d_p11.poxep11e_p11
              .rel.poxya12a_pox.poxyb12b_pox.poxyc12c_pox.poxyd11d_pox.poxye11e_pox
                h2.txa-11.txb-9.txc-8.txd-8.mt1-d.txe-7.mt1-e(title='')
                  - echo $title;

              - if ($sub_title) :
                  .rel.poxya38a_pox.poxyb38b_pox.poxyc38c_pox.poxyd38d_pox.poxye11e_pox
                    .txa-6.mt2-a.accent.txb-3.mt2-b.txc-3.mt2-c.txd-2.mt2-d.txe-3.mt2-e
                      - echo $sub_title;
              - endif;

              - if ($description) :
                .rel.poxa14a_14.poxyb14b_pox.poxyc14c_pox.poxyd11d_pox.poxye11e_pox
                  p
                    - echo $description;
              - endif;

              - if($button_url) :
                  .rel.poxap11a_14.poxbp11b_14.poxcp11c_14.poxdp11d_14.poxep11e_14
                    a(href!='<?php echo $button_url; ?>')
                    button.btn.btn-svg(type='button')
                      svg.btn_svg(version='1.1', viewbox='0 0 30 20', preserveaspectratio='none')
                        rect.btn_svg_shape(width='30', height='40')
                      span Learn More
              - endif;
:php
  }
:php
  function poxy_get_children($i) {

- if (have_posts()):
- while (have_posts()):
  - the_post();

  :php
    //- $image_url = get_poxy_thumb();
    $image_url = get_poxy_thumb_650();
    if ($image_url) {
      $image = 'background-image: url('. $image_url. ')';
    } else {
      $image_ph = get_bloginfo('template_url') . '/images/logo-blue.svg';
      $image = 'background-image: url('.$image_ph.')';
    }


  - $title = get_the_title();
  - $slug = poxy_slug();
  - $description = poxy_meta('_poxy_product_description');
  - $size = poxy_meta('_poxy_product_size');
  - $size = poxy_meta('_poxy_product_size');
  - $height_in = poxy_meta('_poxy_product_height_in');
  - $height_cm = poxy_meta('_poxy_product_height_cm');
  - $diameter_in = poxy_meta('_poxy_product_diameter_in');
  - $diameter_cm = poxy_meta('_poxy_product_diameter_cm');
  - $depth_in = poxy_meta('_poxy_product_depth_in');
  - $depth_cm = poxy_meta('_poxy_product_depth_cm');
  - $length_in = poxy_meta('_poxy_product_length_in');
  - $length_cm = poxy_meta('_poxy_product_length_cm');
  - $width_in = poxy_meta('_poxy_product_width_in');
  - $width_cm = poxy_meta('_poxy_product_width_cm');
  - $weight = poxy_meta('_poxy_product_weight');
  - $pole_length_in = poxy_meta('_poxy_product_pole_length_in');
  - $pole_length_cm = poxy_meta('_poxy_product_pole_length_cm');
  - $fits = poxy_meta('_poxy_product_fits');
  - $voltage = poxy_meta('_poxy_product_voltage');
  - $max_wattage = poxy_meta('_poxy_product_max_wattage');
  - $lights_mounts = poxy_meta('_poxy_product_lights_mounts');
  - $rating = poxy_meta('_poxy_product_rating');
  - $max_wattage = poxy_meta('_poxy_product_max_wattage');

  - if($i == 1) :
      section.hc.hd.he
        .sw
          .cw
            .pox.mb0
              .wrap
                .poxya112a_118.poxyb112b_118.poxyc112c_118
                  .delta Model
                .poxya12a_118.poxyb38b_118.poxyc38c_118
                  .delta Description
                .qoxy
                  .wrap
                    - if ($size) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Size
                    - endif;
                    - if ($width_in) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Width
                        .zeta in/cm
                    - endif;
                    - if ($height_in) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Height
                        .zeta in/cm
                    - endif;
                    - if ($diameter_in) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Diameter
                        .zeta (in/cm)
                    - endif;
                    - if ($depth_in) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Depth
                        .zeta in/cm
                    - endif;
                    - if ($weight) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Weight
                        .zeta lbs
                    - endif;
                    - if ($lights_mounts) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Light Mounts
                    - endif;
                    - if ($voltage) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Voltage
                        .zeta
                    - endif;
                    - if ($rating) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Rating
                        .zeta (wattage)
                    - endif;
                    - if ($max_wattage) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Wattage
                        .zeta (MAX)
                    - endif;
                    - if ($pole_length_in) :
                      .poxya112a_118.poxyb112b_118.poxyc112c_118
                        .delta Pole Length
                        .zeta (in/cm)
                    - endif;
  - endif;
  - $i = 2;

  section.clear.txa-2.txb-1
    .sw
      .cw
        .pox.mb0
          - poxy_edit();
          .wrap
            .poxa14a_18.poxb14b_14.poxc14c_14.poxd12d_12.poxe12e_12.mt2.mb2.tx-c
              figure.mb4.poxya14a_18.poxyb14b_18.poxyc14c_14.poxyd12d_12.poxye12e_12.bg-contain(style!='<?php echo $image; ?>')
                //- a.paxy.fill(href!='<?php bloginfo("url"); ?>/product/<?php echo $slug; ?>')
                //- img.paxy.fill(src!='<?php echo $image_url; ?>')

              //- a.poxy.mr1(ng-click='showModal=!showModal')
              //-   button.b18b_116.p2 Add to Cart
              //- a.poxy.mr4.ml2(ng-click='showModal=!showModal')
              //-   figure.b116b_116.p2
              //-     svg-icon(p='expand')
              //- a.poxy.ml4(ng-click='showModal=!showModal')
              //-   figure.b116b_116.p2
              //-     svg-icon(p='info')


            .mb2.poxa14.poxb14.poxyc12c_p11.poxyd12d_p11.poxye12e_p12
              a(href!='<?php bloginfo("url"); ?>/product/<?php echo $slug; ?>')
                h3.txa-6.txb-6.mt4
                  span.mr2 sku:
                  - echo $title;

              p.he
                - if ($description) :
                  - echo $description;
                - else :
                  - echo get_the_excerpt();
                - endif;



            .qoxya.qoxyb.poxyc14.qoxyd12.qoxye12
              .wrap
                - if ($size) :
                    .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                      p.fill
                        strong.mr2.ha.hb Size:
                        - echo $size;

                - endif;
                - if ($width_in) :
                    .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                      p
                        strong.mr2.ha.hb Width:
                        - echo $width_in . ' / ' . $width_cm;
                - endif;
                - if ($height_in) :
                    .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                      p
                        strong.mr2.ha.hb Height:
                        - echo $height_in . ' / ' . $height_cm;
                - endif;
                - if ($diameter_in) :
                  .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                      p
                        strong.mr2.ha.hb Diameter:
                        - echo $diameter_in . ' / ' . $diameter_cm;
                - endif;
                - if ($depth_in) :
                    .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                      p
                        strong.mr2.ha.hb Depth:
                        - echo $depth_in . ' / ' . $depth_cm;
                - endif;
                - if ($weight) :
                    .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                        p
                          strong.mr2.ha.hb Weight:
                          - echo $weight;
                - endif;
                - if ($lights_mounts) :
                  .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                        p
                          strong.mr2.ha.hb Light Mounts:
                          - echo $lights_mounts;
                - endif;
                - if ($voltage) :
                  .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                      p
                        strong.mr2.ha.hb Voltage:
                        - echo $voltage;
                - endif;
                - if ($rating) :
                      .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                        p
                          strong.mr2.ha.hb Rating:
                          - echo $rating;
                - endif;
                - if ($max_wattage) :
                      .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                        p
                          strong.mr2.ha.hb Max Wattage:
                          - echo $max_wattage;
                - endif;
                - if ($pole_length_in) :
                  .mb4.poxya112a_118.poxyb112b_118.poxyc14c_116
                      p
                        strong.mr2.ha.hb Pole Length:
                        - echo $pole_length_in . ' / ' . $pole_length_cm;
                - endif;

            p.poxy.mt0.ha.hb.hc.hd
              - if ($description) :
                - echo $description;
              - else :
                - echo get_the_excerpt();
              - endif;

- endwhile;
- wp_reset_query();
- endif;
:php
  }

:php
  function poxy_get_parents($termchildren, $section, $bgp = 'cc', $bgs = 'contain' ) {

- if($section == 1) :
  - foreach ( $termchildren as $child ) :

    - $title = $child->name;
    - $description = $child->description;
    - $slug = $child->slug;
    - $term_id = $child->slug;
    - $image = poxy_tax_image($term_id);
    - $image = 'background-image: url('. $image. ')';

    section
      .sw
        .cw
          //- .rel.image.poxya34a_38.poxyb34b_12.poxyc12c_12.poxyd11d_12.poxye11e_12.bgp-cc.bgs-cover
          figure(class!="rel image poxya34a_38poxyb34b_12poxyc12c_12poxyd11d_12poxye11e_12 bgp-<?php echo $bgp; ?> bgs-<?php echo $bgs; ?>", style!='<?php echo $image; ?>')
            a(href!="<?php echo $slug; ?>", rel="bookmark").paxy.fill
          .rel.poxya14a_14.poxyb14b_14.poxyc12c_12.11dpoxd_11.11epoxe_11

            a(href!="<?php echo $slug; ?>", rel="bookmark")
              h3.txa-6.txb-4.txc-4.txd-5.txe-3
                - echo $title;
            .poxyap11.poxybp11.poxycp11.poxydp11.poxyep11
              .poxya112.poxyb112.poxyc18.poxyd16.poxye14.line.mt1.mb1.bg-black
            p
              - echo $description;
            a.poxy.mt1(href!="<?php echo $slug; ?>", rel="bookmark")
              button.p2 Read More

  - endforeach;
- else :
  - foreach ( $termchildren as $child ) :

    - $title = $child->name;
    - $description = $child->description;
    - $slug = $child->slug;
    - $term_id = $child->slug;
    - $image = poxy_tax_image($term_id);
    - $image = 'background-image: url('. $image. ')';

    section
      .sw
        .cw
          figure.rel.image.poxya34a_38.poxyb34b_12.poxyc12c_12.poxyd11d_12.poxye11e_12.bgp-cc.bgs-contain(style!='<?php echo $image; ?>')
            a(href!="<?php echo $slug; ?>", rel="bookmark").paxy.fill
          .rel.poxya14a_14.poxyb14b_14.poxyc12c_12.11dpoxd_11.11epoxe_11

            a(href!="<?php echo $slug; ?>", rel="bookmark")
              h3.txa-6.txb-4.txc-4.txd-5.txe-3
                - echo $title;
            .poxyap11.poxybp11.poxycp11.poxydp11.poxyep11
              .poxya112.poxyb112.poxyc18.poxyd16.poxye14.line.mt1.mb1.bg-black
            p
              - echo $description;
            a.poxy.mt1(href!="<?php echo $slug; ?>", rel="bookmark")
              button.p2 Read More

  - endforeach;
- endif;

:php
  }
